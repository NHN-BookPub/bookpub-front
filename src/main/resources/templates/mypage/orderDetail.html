<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>BookPub - 주문 상세</title>
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">
    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="/static/css/main/root/bootstrap.min.css"/>
    <!-- Slick -->
    <link type="text/css" rel="stylesheet" href="/static/css/main/root/slick.css"/>
    <link type="text/css" rel="stylesheet" href="/static/css/main/root/slick-theme.css"/>
    <!-- nouislider -->
    <link type="text/css" rel="stylesheet" href="/static/css/main/root/nouislider.min.css"/>
    <!-- Custom stlylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="/static/css/main/root/style.css"/>
    <link type="text/css" rel="stylesheet" href="/static/css/mypage/orderdetail.css">
</head>
<body>
    <!-- HEADER -->
    <th:block th:include="main/fragments/rootHeader"></th:block>
    <!-- /HEADER -->
    </br>

    <div class="container">

    <section class="section_wrap">
            <h3>주문/배송 조회 상세</h3>
            <div class="order_summary_box">
                <div class="box_header">
                    <div class="label">
                        <span class="order_date" th:text="${#temporals.format(orderDetail.getCreatedAt, 'yyyy.MM.dd')}"></span>
                        <span class="gap">|</span>
                        <span class="order_num">주문번호 <span class="num" th:text="${orderDetail.getOrderNo()}"></span></span>
                        <span class="gap">|</span>
                        <span class="order_num">송장번호 <span class="num" th:text="${orderDetail.getInvoiceNo()}"></span></span>
                        <span class="gap">|</span>
                        <span class="order_num"><span class="num" th:text="${orderDetail.getOrderState()}"></span></span>
                    </div>
                </div>
            </div>
        </br>
        </br>
            <!--상품관련-->
            <div class="tbl_prod_wrap type_myroom" id="commodityList">
                <h3>상품</h3>

                <table class="tbl_prod">
                    <colgroup>
                        <col />
                        <col style="width: 164px;" />
                        <col style="width: 180px;" />
                        <col style="width: 130px;" />
                    </colgroup>
                    <thead class="hidden">
                    <tr>
                        <th scope="col">상품정보</th>
                        <th scope="col">금액</th>
                        <th scope="col">배송정보</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr th:each="product : ${orderDetail.getOrderProducts()}">
                            <td class="prod_img">
                                <div class="prod_area horizontal">
                                    <div class="prod_thumb_box size_sm">
                                        <span class="img_box">
                                            <!-- 이미지 박스 -->
                                            <img src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" class="img_thumbnail"/>
                                        </span>
                                    </div>
                                </div>
                            </td>

                            <td class="prod">
                                <span class="badge_sm badge_bookpub">
                                    <span class="text">BookPub 직배송!</span>
                                </span>
                                <a th:href="|../../products/view/${product.getProductNo()}|">
                                    <h3 th:text="${product.getTitle()}"></h3>
                                </a>
                                <span class="text">수량 : </span><span class="val" th:text="${product.getProductAmount()}"></span>
                            </td>


                            <td class="prod">
                                <span class="price">
                                    <div class="order_num" th:if="${!product.getStateCode().equals('결제완료')}">
                                        <span class="order_num" th:text="${product.getStateCode()}"></span>
                                    </div>
                                    <span class="val" th:text="${product.getSalesPrice()}"></span>
                                    <span class="unit">원</span>
                                </span>
                            </td>

                            <td class="prod">
                                <div class="right_box">
                                    <button type="button" class="btn_xs btn_light_gray"><span class="text">리뷰 작성</span><span class="ico_arw_white"></span></button>
                                    <button type="button" class="btn_xs btn_light_gray"><span class="text">반품 신청</span><span class="ico_arw_white"></span></button>
                                    <button type="button" class="btn_xs btn_light_gray"><span class="text">교환 신청</span><span class="ico_arw_white"></span></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
    </section>
    </div>

    <div class="container">
        <div style="margin-top: 50px;">
            <!-- 배송정보 -->
            <div class="title_wrap title_size_md">
                <h3>배송</h3>
            </div>

            <div class="tbl_row_wrap">
                <table class="tbl_row">
                    <colgroup>
                        <col style="width: 140px;" />
                        <col style="width: auto;" />
                    </colgroup>
                    <tbody>
                    </tbody>
                </table>
            </div>
                <tr>
                    <h4>송장 번호</h4>
                    <td>
                        <div class="address_item no_line">
                            <div class="address_info_box">
                                <div class="address_person">
                                    <span class="phone_number" th:text="${orderDetail.getInvoiceNo()}"></span>
                                </div>
                            </div>
                        </div>
                    </td>
                    </br>
                    <h4 th:if="${orderDetail.getBuyerName() != orderDetail.getRecipientName()}">주문자 정보</h4>
                    <td>
                        <div class="address_item no_line">
                            <div class="address_info_box">
                                <div class="address_person">
                                    <span class="name"><span th:text="${orderDetail.getBuyerName()}"></span> / </span>
                                    <span class="phone_number" th:text="${orderDetail.getBuyerNumber()}"></span>
                                </div>
                            </div>
                        </div>
                    </td>
                    </br>
                    <h4>배송지 정보</h4>
                    <td>
                        <div class="address_item no_line">
                            <div class="address_info_box">
                                <div class="address_person">
                                    <span class="name"><span th:text="${orderDetail.getRecipientName()}"></span> / </span>
                                    <span class="phone_number" th:text="${orderDetail.getRecipientNumber()}"></span>
                                </div>
                                <div class="address" th:text="${orderDetail.getAddressBase() + ' ' + orderDetail.getAddressDetail()}"></div>
                                <div class="msg">
                                    <div>배송선택일자 :</div>&ensp;
                                    <div class="text">
                                        <span th:text="${#temporals.format(orderDetail.getReceivedAt(), 'yyyy.MM.dd')}"></span>
                                    </div>
                                </div>
                                <div class="msg">
                                    <div>배송요청사항 :</div>&ensp;
                                    <div class="text">
                                        <span th:text="${orderDetail.getOrderRequest()}"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
        </div>
    </div>

    <div class="container">
        <div style="margin-top: 50px;">
            <div class="title_wrap title_size_md">
                <h3>결제</h3>
            </div>

            <div class="tbl_row_wrap">
                <table class="tbl_row">
                    <colgroup>
                        <col style="width: 140px;" />
                        <col style="width: auto;" />
                    </colgroup>
                    <tbody>
                    </tbody>
                </table>
            </div>

            <tr>
                <h4>쿠폰 할인액</h4>
                <td>
                    <div class="address_item no_line">
                        <div class="address_info_box">
                            <div class="address_person">
                                <h5><span th:text="${orderDetail.getCouponAmount()}"></span>원</h5>
                            </div>
                        </div>
                    </div>
                </td>
                </br>
                <h4>포인트 사용량</h4>
                <td>
                    <div class="address_item no_line">
                        <div class="address_info_box">
                            <div class="address_person">
                                <h5><span th:text="${orderDetail.getPointAmount()}"></span>원</h5>
                            </div>
                        </div>
                    </div>
                </td>
                </br>
                <h4>결제 금액</h4>
                <td>
                    <div class="address_item no_line">
                        <div class="address_info_box">
                            <div class="address_person">
                                <h5 th:if="${orderDetail.isPackaged()}">포장비 : <span th:text="${orderDetail.getPackageAmount()}"></span>원</h5>
                                <h5>배송비 : <span th:text="${orderDetail.getDeliveryAmount()}"></span>원</h5>
                                <h5>최종 결제 금액 : <span th:text="${orderDetail.getTotalAmount()}"></span>원</h5>
                            </div>
                        </div>
                    </div>
                </td>
                </br>
            </tr>

        </div>
    </div>

    <!-- FOOTER -->
    <th:block th:include="main/fragments/rootFooter"></th:block>
    <!-- /FOOTER -->

    <!-- jQuery Plugins -->
    <script src="/static/js/main/jquery.min.js"></script>
    <script src="/static/js/main/bootstrap.min.js"></script>
    <script src="/static/js/main/slick.min.js"></script>
    <script src="/static/js/main/nouislider.min.js"></script>
    <script src="/static/js/main/jquery.zoom.min.js"></script>
</body>
</html>